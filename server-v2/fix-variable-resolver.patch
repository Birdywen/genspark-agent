--- variable-resolver.js.old
+++ variable-resolver.js
@@ -160,7 +160,7 @@
       
       case 'join':
-        if (Array.isArray(value)) return value.join(args[0] || ',');
+        if (Array.isArray(value)) return value.join(args[0] !== undefined ? args[0] : ',');
         return value;
       
       case 'split':
-        if (typeof value === 'string') return value.split(args[0] || ',');
+        if (typeof value === 'string') {
+          const delimiter = args[0] !== undefined ? args[0] : ',';
+          return delimiter === '' ? value.split('') : value.split(delimiter);
+        }
         return value;
       
       case 'replace':
         if (typeof value === 'string' && args.length >= 2) {
-          return value.replace(new RegExp(args[0], 'g'), args[1]);
+          // 处理特殊字符
+          const pattern = args[0].replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
+          return value.replace(new RegExp(pattern, 'g'), args[1]);
         }
         return value;
